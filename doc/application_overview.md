# TODOアプリケーション システム解説書

## 1. はじめに

このドキュメントは、このTODOアプリケーションがどのような技術で、どのように作られているかを解説するものです。
インターン生の皆さんが、アプリケーションの全体像を理解し、改修や機能追加にスムーズに取り組めるようになることを目的としています。

このアプリは、Webアプリケーションフレームワークである **Ruby on Rails** を中心に構築されています。

## 2. アプリケーションの構造 (MVCアーキテクチャ)

Railsは **MVC (Model-View-Controller)** という設計パターンを採用しています。これは、アプリケーションの役割を3つに分割して整理するための考え方です。

- **Model (モデル):** データベースとのやり取りや、アプリケーションの「ビジネスロジック」（データに関するルールや処理）を担当します。
  - `app/models/task.rb`: タスクのデータ構造（タイトル、完了状態など）を定義しています。
- **View (ビュー):** ユーザーに表示されるHTML画面を生成します。
  - `app/views/tasks/`: タスクの一覧、詳細、新規作成フォームなどのHTMLファイルが置かれています。
- **Controller (コントローラ):** ユーザーからのリクエストを受け取り、モデルとビューを協調させてレスポンスを返します。いわば「司令塔」です。
  - `app/controllers/tasks_controller.rb`: タスクに関するリクエスト（一覧表示、作成、更新、削除など）を全て処理します。

### 主要なディレクトリ

- `app/`: 上記のMVCに関連するコードがほぼ全てここにあります。開発の中心となるディレクトリです。
- `config/`: アプリケーションの設定ファイルが置かれています。
  - `routes.rb`: ユーザーがアクセスするURLと、それに対応するコントローラのアクションを結びつける、非常に重要なファイルです。
- `db/`: データベース関連のファイルが置かれています。
  - `schema.rb`: 現在のデータベースの構造（テーブルやカラムの定義）が書かれています。
  - `migrate/`: データベースの構造を変更した際の「設計図の変更履歴」が保存されています。
- `doc/`: このドキュメントのような、開発に役立つ資料を置く場所です。

## 3. 主要な機能と処理の流れ

ユーザーがタスクを操作する際の、裏側の処理の流れを見てみましょう。

### タスク一覧表示 (Read)

1.  ユーザーがブラウザで `http://.../tasks` にアクセスします。
2.  **Routing:** `config/routes.rb` が `/tasks` というURLを `tasks_controller` の `index` アクションに割り当てます。
3.  **Controller:** `tasks_controller.rb` の `index` メソッドが実行されます。
4.  **Model:** `index` メソッド内で `Task.all` が呼び出され、`app/models/task.rb` を通じてデータベースの `tasks` テーブルから全てのタスクデータを取得します。
5.  **View:** コントローラは取得したタスクデータ (`@tasks`) を `app/views/tasks/index.html.erb` に渡します。ビューはデータを使ってHTMLを生成し、ユーザーのブラウザに表示します。

### タスク作成 (Create)

1.  ユーザーが一覧画面で「新しいタスク」ボタンを押し、フォーム画面 (`/tasks/new`) を表示します。
2.  フォームにタイトルなどを入力して「登録」ボタンを押すと、データが `/tasks` というURLに **POST** という方法で送信されます。
3.  **Routing:** `config/routes.rb` は、同じ `/tasks` というURLでも **POST** で来たリクエストは `tasks_controller` の `create` アクションに割り当てます。
4.  **Controller:** `create` アクションが実行され、送信されたデータを使って新しい `Task` オブジェクトを作成し、`@task.save` でデータベースに保存します。
5.  保存が成功すると、コントローラはブラウザに対して「タスク一覧ページに移動してください」という指示（リダイレクト）を出し、一覧ページが再表示されます。

更新（Update）や削除（Delete）も、同様に `routes.rb` -> `(コントローラのアクション)` -> `(モデル)` -> `(リダイレクト)` という流れで処理が進みます。

## 4. 使用されている主要な技術

- **Ruby on Rails:** このアプリケーションの骨格となるWebフレームワークです。
- **Puma:** Railsアプリケーションを動かすためのWebサーバーです。
- **SQLite3:** 開発環境で使われている、手軽なデータベース管理システムです。
- **Bootstrap:** 見た目を整えるためのCSSフレームワークです。ボタンやフォームなどのデザインはこれによって作られています。
- **Hotwire (Turbo / Stimulus):** Rails 7から標準となった技術です。ページ全体を再読み込みすることなく、画面の一部だけを更新することで、高速でスムーズな操作感を実現しています。
- **esbuild:** JavaScriptやCSSを効率的に一つにまとめてくれるツールです。

## 5. 次のステップ

このドキュメントで全体像を掴んだら、以下のことに挑戦してみましょう。

- **コードを読んでみる:** `tasks_controller.rb` や `app/views/tasks/index.html.erb` を実際に開いて、どのようなコードが書かれているか読んでみましょう。
- **ルーティングを確認する:** ターミナルで `rails routes` というコマンドを実行すると、このアプリケーションの全てのURLとコントローラのアクションの対応表を見ることができます。
- **コンソールを触ってみる:** ターミナルで `rails console` を実行すると、Rubyのコードを対話的に実行できる環境に入れます。ここで `Task.all` や `Task.create(title: "テスト")` などを実行して、直接データベースを操作してみましょう。
- **機能を追加してみる:** `doc/feature_ideas.md` を参考にして、簡単な機能追加に挑戦してみましょう。
